{"version":3,"sources":["components/Header/logo.png","components/IncidentCardWithImg/bike.svg","components/Header/Header.tsx","components/Wrapper/Wrapper.tsx","utils/getLocaleDateAndTime.ts","components/IncidentCardContent/IncidentCardContent.tsx","constants/constants.js","hooks/useIncidentAndMap.ts","components/IncidentCardWithMap/IncidentCardWithMap.tsx","components/PageCase/PageCase.tsx","utils/getUrlParams.ts","utils/composeQueryString.ts","components/SearchForm/SearchForm.tsx","components/IncidentCardWithImg/IncidentCardWithImg.tsx","hooks/useIncidents.ts","components/SearchResults/SearchResults.tsx","components/PageIndex/PageIndex.tsx","components/Page404/Page404.tsx","components/App/App.tsx","index.tsx"],"names":["module","exports","__webpack_require__","p","styles","createStyles","header","display","alignItems","logo","width","height","marginRight","withStyles","_ref","classes","react_default","a","createElement","className","href","src","alt","index_es","variant","gutterBottom","wrapper","minWidth","maxWidth","margin","padding","children","getLocaleDateAndTime","secondsTimestamp","Date","toLocaleString","minute","year","month","day","hour","theme","cardContent","flex","flexDirection","spacing","unit","cardFooter","marginTop","alignSelf","fontStyle","incident","withLink","Link_default","component","props","react_router_dom","Object","assign","to","concat","id","title","Typography_default","description","occurred_at","address","updated_at","bikeWiseApi","useIncidentAndMap","incidentId","_useState","useState","_useState2","slicedToArray","setIncident","_useState3","_useState4","viewport","setViewport","_useState5","_useState6","pinCoordinates","setPinCoordinates","_useState7","_useState8","error","setError","useEffect","controller","AbortController","signal","fetch","then","response","json","queryString","stringify","occurred_before","occurred_after","incident_type","query","features","geometry","coordinates","zoom","longitude","latitude","catch","abort","IncidentCardWithMap","_useIncidentAndMap","Paper_default","components_IncidentCardContent_IncidentCardContent","message","esm","mapStyle","mapboxApiAccessToken","onViewportChange","offsetLeft","offsetTop","style","backgroundColor","PageCase","match","Wrapper","Grid_default","container","item","xs","components_Header_Header","components_IncidentCardWithMap_IncidentCardWithMap","params","getUrlParams","parsedQuery","parse","location","search","urlPage","page","parseInt","urlDateFrom","dateFrom","fromUnixTime","urlDateTo","dateTo","urlTextQuery","textQuery","composeQueryString","queryObj","getUnixTime","toString","datePicker","minHeight","button","withRouter","history","_getUrlParams","setTextQuery","onDateFromChange","onDateToChange","DatePickerTemplate","_ref2","value","onChange","objectWithoutProperties","material_ui_pickers_esm","clearable","autoOk","disableFuture","keyboard","format","mask","onSubmit","event","preventDefault","push","justify","TextField_default","label","target","placeholder","fullWidth","maxDate","minDate","Button_default","type","color","imageContainer","backgroundImage","defaultBikeImage","backgroundSize","image","card","media","image_url_thumb","useIncidents","pageIncidents","setPageIncidents","allIncidents","setAllIncidents","baseQuery","proximity","pageResultsQuery","objectSpread","per_page","allResultsQuery","fetchIncidents","incidents","length","slice","_useIncidents","handlePageClick","offset","newQueryString","incidentsCount","Pagination","lib_default","limit","total","onClick","PaginationArea","direction","map","key","components_IncidentCardWithImg_IncidentCardWithImg","PageIndex","components_SearchForm_SearchForm","components_SearchResults_SearchResults","LinkToIndexPage","Page404","@global body","overflowY","react_router","path","exact","createMuiTheme","typography","useNextVariants","ReactDOM","render","basename","core_styles","utils","DateFnsUtils","Fragment","CssBaseline_default","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.511bd2d4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.f958e91a.png\";","module.exports = __webpack_public_path__ + \"static/media/bike.b4758c72.svg\";","import React from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { withStyles, WithStyles, createStyles } from \"@material-ui/core/styles\";\r\n\r\nimport logo from \"./logo.png\";\r\n\r\nconst styles = createStyles({\r\n  header: {\r\n    display: \"flex\",\r\n    alignItems: \"center\"\r\n  },\r\n  logo: {\r\n    width: 150,\r\n    height: 150,\r\n    marginRight: 24\r\n  }\r\n});\r\n\r\ninterface Props extends WithStyles<typeof styles> {}\r\n\r\nconst Header: React.FunctionComponent<Props> = ({ classes }) => {\r\n  return (\r\n    <header className={classes.header}>\r\n      <a href=\"/coding-challenge-frontend-react/\">\r\n        <img src={logo} alt=\"Logo\" className={classes.logo} />\r\n      </a>\r\n      <div>\r\n        <Typography variant=\"h3\" gutterBottom>\r\n          Police Department of Berlin\r\n        </Typography>\r\n        <Typography variant=\"h5\">Stolen Bikes</Typography>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(Header);\r\n","import React from \"react\";\r\nimport { withStyles, WithStyles, createStyles } from \"@material-ui/core/styles\";\r\n\r\nconst styles = createStyles({\r\n  wrapper: {\r\n    minWidth: 800,\r\n    maxWidth: 1000,\r\n    margin: \"0 auto\",\r\n    padding: 20\r\n  }\r\n});\r\n\r\ninterface Props extends WithStyles<typeof styles> {}\r\n\r\nconst PageIndex: React.FunctionComponent<Props> = ({ classes, children }) => {\r\n  return <div className={classes.wrapper}>{children}</div>;\r\n};\r\n\r\nexport default withStyles(styles)(PageIndex);\r\n","const getLocaleDateAndTime = (secondsTimestamp: number) =>\r\n  new Date(secondsTimestamp * 1000).toLocaleString([], {\r\n    minute: \"numeric\",\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n    hour: \"numeric\"\r\n  });\r\n\r\nexport default getLocaleDateAndTime;\r\n","import React from \"react\";\r\nimport {\r\n  withStyles,\r\n  WithStyles,\r\n  createStyles,\r\n  Theme\r\n} from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\n\r\nimport { IncidentContent } from \"../../types\";\r\nimport getLocaleDateAndTime from \"../../utils/getLocaleDateAndTime\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    cardContent: {\r\n      flex: \"auto\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      padding: theme.spacing.unit * 2\r\n    },\r\n    cardFooter: {\r\n      marginTop: \"auto\",\r\n      alignSelf: \"flex-end\",\r\n      fontStyle: \"italic\"\r\n    }\r\n  });\r\n\r\ninterface Props extends WithStyles<typeof styles> {\r\n  incident: IncidentContent;\r\n  withLink?: boolean;\r\n}\r\n\r\nconst IncidentCardContent: React.FunctionComponent<Props> = ({\r\n  incident,\r\n  withLink,\r\n  classes\r\n}) => {\r\n  const LinkToIncidentPage: React.FunctionComponent = props => (\r\n    <RouterLink to={`/case/${incident.id}`} {...props} />\r\n  );\r\n\r\n  return (\r\n    <div className={classes.cardContent}>\r\n      {withLink ? (\r\n        <Link component={LinkToIncidentPage} variant=\"h6\" gutterBottom>\r\n          {incident.title}\r\n        </Link>\r\n      ) : (\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          {incident.title || \"Loading...\"}\r\n        </Typography>\r\n      )}\r\n\r\n      <Typography variant=\"body1\" gutterBottom>\r\n        {incident.description || \"No description\"}\r\n      </Typography>\r\n\r\n      <Typography variant=\"body1\" gutterBottom>\r\n        {incident.occurred_at && incident.address\r\n          ? `${getLocaleDateAndTime(incident.occurred_at)} — ${\r\n              incident.address\r\n            }`\r\n          : \"...\"}\r\n      </Typography>\r\n\r\n      <Typography variant=\"caption\" className={classes.cardFooter}>\r\n        {incident.updated_at\r\n          ? `Reported: ${getLocaleDateAndTime(incident.updated_at)}`\r\n          : \"...\"}\r\n      </Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(IncidentCardContent);\r\n","export const ITEMS_PER_PAGE = 10;\r\nexport const INFINITE_ITEMS_PER_PAGE = 1000000;\r\nexport const bikeWiseApi = \"https://bikewise.org:443/api/v2\";\r\nexport const mapBoxToken =\r\n  \"pk.eyJ1IjoieWFraGludmFkaW0iLCJhIjoiY2p0eDJ2bDk3MmVleDRkbXN3bjV2enk4ZyJ9.UuTPJrkGfk0WrX59JPHu8w\";\r\n","import { useEffect, useState } from \"react\";\r\nimport queryString from \"query-string\";\r\n\r\nimport { bikeWiseApi } from \"../constants/constants\";\r\nimport { Incident, IncidentContent, MapViewport, Coordinates } from \"../types\";\r\n\r\nimport \"mapbox-gl/dist/mapbox-gl.css\";\r\n\r\nconst useIncidentAndMap = (incidentId: string) => {\r\n  const [incident, setIncident] = useState({\r\n    title: \"Loading...\"\r\n  } as IncidentContent);\r\n  const [viewport, setViewport] = useState({} as MapViewport);\r\n  const [pinCoordinates, setPinCoordinates] = useState({} as Coordinates);\r\n  const [error, setError] = useState(null as Error | null);\r\n\r\n  useEffect(() => {\r\n    const controller = new AbortController();\r\n    const { signal } = controller;\r\n\r\n    fetch(`${bikeWiseApi}/incidents/${incidentId}`, {\r\n      signal\r\n    })\r\n      .then(response => response.json())\r\n      .then(({ incident }: { incident: Incident }) => {\r\n        setIncident(incident);\r\n\r\n        return fetch(\r\n          `${bikeWiseApi}/locations?${queryString.stringify({\r\n            occurred_before: incident.occurred_at,\r\n            occurred_after: incident.occurred_at,\r\n            incident_type: \"theft\",\r\n            query: incident.title\r\n          })}`,\r\n          { signal }\r\n        );\r\n      })\r\n      .then(response => response.json())\r\n      .then(json => json.features[0].geometry.coordinates)\r\n      .then(coordinates => {\r\n        setViewport({\r\n          zoom: 10,\r\n          longitude: coordinates[0],\r\n          latitude: coordinates[1]\r\n        });\r\n        setPinCoordinates({\r\n          longitude: coordinates[0],\r\n          latitude: coordinates[1]\r\n        });\r\n      })\r\n      .catch(setError);\r\n\r\n    return () => {\r\n      controller.abort();\r\n    };\r\n  }, []);\r\n\r\n  return { incident, viewport, setViewport, pinCoordinates, error };\r\n};\r\n\r\nexport default useIncidentAndMap;\r\n","import React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport ReactMapGL, { Marker } from \"react-map-gl\";\n\nimport IncidentCardContent from \"../IncidentCardContent/IncidentCardContent\";\nimport { mapBoxToken } from \"../../constants/constants\";\nimport useIncidentAndMap from \"../../hooks/useIncidentAndMap\";\n\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst IncidentCardWithMap = ({ incidentId }: { incidentId: string }) => {\n  const {\n    incident,\n    viewport,\n    setViewport,\n    pinCoordinates,\n    error\n  } = useIncidentAndMap(incidentId);\n  const mapHeight = 400;\n\n  return (\n    <Paper>\n      {error ? (\n        <IncidentCardContent incident={{ title: `Error: ${error.message}` }} />\n      ) : (\n        <IncidentCardContent incident={incident} />\n      )}\n      {viewport.latitude &&\n      viewport.longitude &&\n      pinCoordinates.latitude &&\n      pinCoordinates.longitude ? (\n        <ReactMapGL\n          mapStyle=\"mapbox://styles/mapbox/streets-v11\"\n          width=\"100%\"\n          height={mapHeight}\n          mapboxApiAccessToken={mapBoxToken}\n          onViewportChange={viewport => setViewport(viewport)}\n          {...viewport}\n        >\n          <Marker\n            latitude={pinCoordinates.latitude}\n            longitude={pinCoordinates.longitude}\n            offsetLeft={-6}\n            offsetTop={-11}\n          >\n            <div>📍</div>\n          </Marker>\n        </ReactMapGL>\n      ) : (\n        <div style={{ height: mapHeight, backgroundColor: \"#EFE9E1\" }} />\n      )}\n    </Paper>\n  );\n};\n\nexport default IncidentCardWithMap;\n","import React from \"react\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport Header from \"../Header/Header\";\r\nimport Wrapper from \"../Wrapper/Wrapper\";\r\nimport IncidentCardWithMap from \"../IncidentCardWithMap/IncidentCardWithMap\";\r\n\r\ninterface Props extends RouteComponentProps<{ id: string }> {}\r\n\r\nconst PageCase: React.FunctionComponent<Props> = ({ match }) => {\r\n  return (\r\n    <Wrapper>\r\n      <Grid container spacing={24}>\r\n        <Grid item xs={12}>\r\n          <Header />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <IncidentCardWithMap incidentId={match.params.id} />\r\n        </Grid>\r\n      </Grid>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default PageCase;\r\n","import queryString from \"query-string\";\r\nimport { fromUnixTime } from \"date-fns/esm\";\r\n\r\nconst getUrlParams = () => {\r\n  const parsedQuery = queryString.parse(location.search);\r\n  const urlPage =\r\n    typeof parsedQuery.page === \"string\" ? parseInt(parsedQuery.page) : 1;\r\n\r\n  const urlDateFrom =\r\n    typeof parsedQuery.dateFrom === \"string\"\r\n      ? fromUnixTime(parseInt(parsedQuery.dateFrom))\r\n      : null;\r\n\r\n  const urlDateTo =\r\n    typeof parsedQuery.dateTo === \"string\"\r\n      ? fromUnixTime(parseInt(parsedQuery.dateTo))\r\n      : null;\r\n\r\n  const urlTextQuery =\r\n    typeof parsedQuery.textQuery === \"string\" ? parsedQuery.textQuery : \"\";\r\n\r\n  return { urlTextQuery, urlDateFrom, urlDateTo, urlPage };\r\n};\r\n\r\nexport default getUrlParams;\r\n","import queryString from \"query-string\";\r\nimport { getUnixTime } from \"date-fns/esm\";\r\n\r\nconst composeQueryString = ({\r\n  dateFrom,\r\n  dateTo,\r\n  textQuery\r\n}: {\r\n  dateFrom: Date | null;\r\n  dateTo: Date | null;\r\n  textQuery: string;\r\n}) => {\r\n  let queryObj: { [key: string]: string } = {};\r\n  if (dateFrom) {\r\n    queryObj.dateFrom = getUnixTime(dateFrom).toString();\r\n  }\r\n  if (dateTo) {\r\n    queryObj.dateTo = getUnixTime(dateTo).toString();\r\n  }\r\n  if (textQuery) {\r\n    queryObj.textQuery = textQuery;\r\n  }\r\n\r\n  return queryString.stringify(queryObj);\r\n};\r\n\r\nexport default composeQueryString;\r\n","import React, { useState } from \"react\";\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { createStyles, WithStyles, withStyles } from \"@material-ui/core/styles\";\nimport { InlineDatePicker } from \"material-ui-pickers\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport getUrlParams from \"../../utils/getUrlParams\";\nimport composeQueryString from \"../../utils/composeQueryString\";\nimport { DatePickerInlineProps } from \"material-ui-pickers/DatePicker/DatePickerInline\";\n\nconst styles = createStyles({\n  datePicker: {\n    minHeight: 80\n  },\n  button: {\n    marginTop: 12\n  }\n});\n\ninterface Props extends RouteComponentProps, WithStyles<typeof styles> {}\n\nconst SearchForm: React.FunctionComponent<Props> = ({ history, classes }) => {\n  const { urlTextQuery, urlDateFrom, urlDateTo } = getUrlParams();\n  const [textQuery, setTextQuery] = useState(urlTextQuery);\n  const [dateFrom, onDateFromChange] = useState(urlDateFrom);\n  const [dateTo, onDateToChange] = useState(urlDateTo);\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n    if (\n      urlTextQuery !== textQuery ||\n      urlDateFrom !== dateFrom ||\n      urlDateTo !== dateTo\n    ) {\n      history.push(`/?${composeQueryString({ textQuery, dateFrom, dateTo })}`);\n    }\n  };\n\n  const handleTextQueryChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setTextQuery(event.target.value);\n  };\n\n  const DatePickerTemplate: React.FunctionComponent<DatePickerInlineProps> = ({\n    value,\n    onChange,\n    ...props\n  }) => (\n    <InlineDatePicker\n      clearable\n      autoOk\n      disableFuture\n      keyboard\n      className={classes.datePicker}\n      format=\"dd.MM.yyyy\"\n      mask={value =>\n        value ? [/\\d/, /\\d/, \".\", /\\d/, /\\d/, \".\", /\\d/, /\\d/, /\\d/, /\\d/] : []\n      }\n      value={value}\n      onChange={onChange}\n      {...props}\n    />\n  );\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Grid\n        container\n        spacing={24}\n        alignItems=\"flex-start\"\n        justify=\"space-between\"\n      >\n        <Grid item xs={4}>\n          <TextField\n            id=\"text-query\"\n            label=\"Search case descriptions\"\n            value={textQuery}\n            onChange={handleTextQueryChange}\n            placeholder=\"Cannondale\"\n            fullWidth\n          />\n        </Grid>\n\n        <Grid item xs>\n          <DatePickerTemplate\n            value={dateFrom}\n            onChange={onDateFromChange}\n            label=\"From\"\n            placeholder=\"31.12.2017\"\n            maxDate={dateTo}\n          />\n        </Grid>\n\n        <Grid item xs>\n          <DatePickerTemplate\n            value={dateTo}\n            onChange={onDateToChange}\n            label=\"To\"\n            placeholder=\"31.12.2018\"\n            minDate={dateFrom}\n          />\n        </Grid>\n\n        <Grid item xs>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"primary\"\n            fullWidth\n            className={classes.button}\n          >\n            Find Cases\n          </Button>\n        </Grid>\n      </Grid>\n    </form>\n  );\n};\n\nexport default withStyles(styles)(withRouter(SearchForm));\n","import React from \"react\";\r\nimport {\r\n  withStyles,\r\n  WithStyles,\r\n  createStyles,\r\n  Theme\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport { Incident } from \"../../types\";\r\nimport defaultBikeImage from \"./bike.svg\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport IncidentCardContent from \"../IncidentCardContent/IncidentCardContent\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    imageContainer: {\r\n      width: 200,\r\n      height: 200,\r\n      flex: \"none\",\r\n      backgroundImage: `url(${defaultBikeImage})`,\r\n      backgroundSize: 200\r\n    },\r\n    image: {\r\n      height: \"100%\"\r\n    },\r\n    card: {\r\n      display: \"flex\"\r\n    }\r\n  });\r\n\r\ninterface Props extends WithStyles<typeof styles> {\r\n  incident: Incident;\r\n}\r\n\r\nconst IncidentCardWithImg: React.FunctionComponent<Props> = ({\r\n  incident,\r\n  classes\r\n}) => {\r\n  return (\r\n    <Paper className={classes.card}>\r\n      <div className={classes.imageContainer}>\r\n        {incident.media.image_url_thumb && (\r\n          <img src={incident.media.image_url_thumb} className={classes.image} />\r\n        )}\r\n      </div>\r\n      <IncidentCardContent incident={incident} withLink />\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default withStyles(styles)(IncidentCardWithImg);\r\n","import { useState, useEffect } from \"react\";\r\nimport { Incident, Query } from \"../types\";\r\nimport queryString from \"query-string\";\r\nimport {\r\n  ITEMS_PER_PAGE,\r\n  INFINITE_ITEMS_PER_PAGE,\r\n  bikeWiseApi\r\n} from \"../constants/constants\";\r\nimport getUrlParams from \"../utils/getUrlParams\";\r\n\r\n// on every change in search parameters, reload pageIncidents and allIncidents\r\nconst useIncidents = () => {\r\n  const [pageIncidents, setPageIncidents] = useState(null as Incident[] | null);\r\n  const [allIncidents, setAllIncidents] = useState(null as Incident[] | null);\r\n  const [error, setError] = useState(null as Error | null);\r\n\r\n  const parsedQuery = queryString.parse(location.search);\r\n  const { urlPage } = getUrlParams();\r\n\r\n  useEffect(() => {\r\n    const baseQuery = {\r\n      incident_type: \"theft\",\r\n      proximity: \"London\",\r\n      query: parsedQuery.textQuery,\r\n      occurred_after: parsedQuery.dateFrom,\r\n      occurred_before: parsedQuery.dateTo\r\n    };\r\n\r\n    const pageResultsQuery = {\r\n      ...baseQuery,\r\n      per_page: ITEMS_PER_PAGE,\r\n      page: urlPage\r\n    };\r\n\r\n    const allResultsQuery = {\r\n      ...baseQuery,\r\n      per_page: INFINITE_ITEMS_PER_PAGE,\r\n      page: 1\r\n    };\r\n\r\n    const controller = new AbortController();\r\n    const { signal } = controller;\r\n\r\n    const fetchIncidents = (query: typeof allResultsQuery) =>\r\n      fetch(`${bikeWiseApi}/incidents?${queryString.stringify(query)}`, {\r\n        signal\r\n      })\r\n        .then(response => response.json())\r\n        .then(json => json.incidents)\r\n        .catch(setError);\r\n\r\n    setPageIncidents(null);\r\n    setAllIncidents(null);\r\n    setError(null);\r\n    fetchIncidents(pageResultsQuery).then(setPageIncidents);\r\n    fetchIncidents(allResultsQuery).then(setAllIncidents);\r\n\r\n    return () => {\r\n      controller.abort();\r\n    };\r\n  }, [parsedQuery.textQuery, parsedQuery.dateFrom, parsedQuery.dateTo]);\r\n\r\n  // get pageIncidents from allIncidents if page or allIncidents were changed (client-side pagination)\r\n  useEffect(() => {\r\n    if (allIncidents && allIncidents.length) {\r\n      setPageIncidents(\r\n        allIncidents.slice(\r\n          (urlPage - 1) * ITEMS_PER_PAGE,\r\n          urlPage * ITEMS_PER_PAGE\r\n        )\r\n      );\r\n    }\r\n  }, [urlPage, allIncidents]);\r\n\r\n  return {\r\n    pageIncidents,\r\n    setPageIncidents,\r\n    allIncidents,\r\n    setAllIncidents,\r\n    error\r\n  };\r\n};\r\n\r\nexport default useIncidents;\r\n","import React from \"react\";\nimport IncidentCardWithImg from \"../IncidentCardWithImg/IncidentCardWithImg\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { withRouter, RouteComponentProps } from \"react-router\";\nimport queryString from \"query-string\";\nimport MuiPagination from \"material-ui-flat-pagination\";\nimport { Typography } from \"@material-ui/core\";\n\nimport getUrlParams from \"../../utils/getUrlParams\";\nimport { ITEMS_PER_PAGE } from \"../../constants/constants\";\nimport useIncidents from \"../../hooks/useIncidents\";\n\ninterface Props extends RouteComponentProps {}\n\nconst SearchResults: React.FunctionComponent<Props> = ({\n  location,\n  history\n}) => {\n  const { pageIncidents, allIncidents, error } = useIncidents();\n\n  // on a pagination link click, update the url with the new page number\n  const handlePageClick = (event: React.MouseEvent, offset: number) => {\n    const newQueryString = queryString.stringify({\n      ...queryString.parse(location.search),\n      page: offset / ITEMS_PER_PAGE + 1\n    });\n    history.push(`/?${newQueryString}`);\n  };\n\n  const incidentsCount = allIncidents\n    ? `${allIncidents.length} ${\n        allIncidents.length === 1 ? \"case\" : \"cases\"\n      } found`\n    : \"Counting cases...\";\n\n  const { urlPage } = getUrlParams();\n\n  const Pagination = () => (\n    <MuiPagination\n      limit={ITEMS_PER_PAGE}\n      offset={(urlPage - 1) * ITEMS_PER_PAGE}\n      total={allIncidents ? allIncidents.length : urlPage * ITEMS_PER_PAGE}\n      onClick={handlePageClick}\n    />\n  );\n\n  const IncidentsArea = () => {\n    if (error) {\n      return <Typography variant=\"h5\">Error: {error.message}</Typography>;\n    }\n    if (pageIncidents === null) {\n      return <Typography variant=\"h5\">Loading...</Typography>;\n    }\n    if (pageIncidents.length === 0) {\n      return <Typography variant=\"h5\">No results</Typography>;\n    }\n    return (\n      <Grid container spacing={24} direction=\"column\">\n        {pageIncidents.map(incident => (\n          <Grid item key={incident.id}>\n            <IncidentCardWithImg incident={incident} />\n          </Grid>\n        ))}\n      </Grid>\n    );\n  };\n\n  const PaginationArea = () => (\n    <Grid item xs={12} container justify=\"space-between\" alignItems=\"center\">\n      <Grid item>\n        <Pagination />\n      </Grid>\n\n      <Grid item>\n        <Typography variant=\"body1\">{incidentsCount}</Typography>\n      </Grid>\n    </Grid>\n  );\n\n  return (\n    <Grid container spacing={24}>\n      <Grid item xs={12}>\n        <PaginationArea />\n      </Grid>\n\n      <Grid item xs={12}>\n        <IncidentsArea />\n      </Grid>\n\n      <Grid item xs={12}>\n        <PaginationArea />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default withRouter(SearchResults);\n","import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport SearchForm from \"../SearchForm/SearchForm\";\r\nimport SearchResults from \"../SearchResults/SearchResults\";\r\nimport Header from \"../Header/Header\";\r\nimport Wrapper from \"../Wrapper/Wrapper\";\r\n\r\nconst PageIndex = () => {\r\n  return (\r\n    <Wrapper>\r\n      <Grid container spacing={24}>\r\n        <Grid item xs={12}>\r\n          <Header />\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <SearchForm />\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <SearchResults />\r\n        </Grid>\r\n      </Grid>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default PageIndex;\r\n","import React from \"react\";\r\nimport Wrapper from \"../Wrapper/Wrapper\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst LinkToIndexPage: React.FunctionComponent = props => (\r\n  <RouterLink to=\"/\" {...props} />\r\n);\r\n\r\nconst Page404 = () => {\r\n  return (\r\n    <Wrapper>\r\n      <Typography variant=\"h1\" gutterBottom>\r\n        Page not found\r\n      </Typography>\r\n\r\n      <Link component={LinkToIndexPage} variant=\"body1\">\r\n        Go to main page\r\n      </Link>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Page404;\r\n","import React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport PageCase from \"../PageCase/PageCase\";\nimport PageIndex from \"../PageIndex/PageIndex\";\nimport Page404 from \"../Page404/Page404\";\nimport { Route, Switch } from \"react-router-dom\";\n\nconst styles = {\n  \"@global body\": {\n    overflowY: \"overlay\" as any // unofficial webkit value\n  }\n};\n\nconst App = () => {\n  return (\n    <Switch>\n      <Route path=\"/\" exact component={PageIndex} />\n      <Route path=\"/case/:id\" component={PageCase} />\n      <Route component={Page404} />\n    </Switch>\n  );\n};\n\nexport default withStyles(styles)(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core/styles\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { MuiPickersUtilsProvider } from \"material-ui-pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\nimport App from \"./components/App/App\";\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true\n  }\n});\n\nReactDOM.render(\n  <Router basename=\"/coding-challenge-frontend-react/\">\n    <MuiThemeProvider theme={theme}>\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\n        <>\n          <CssBaseline />\n          <App />\n        </>\n      </MuiPickersUtilsProvider>\n    </MuiThemeProvider>\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}